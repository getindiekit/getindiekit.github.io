<!DOCTYPE html>
<html lang="" dir="ltr" class="h-x-app color-scheme--automatic">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
    <meta name="theme-color" content="#0055ee"/>
    <meta name="supported-color-schemes" content="light dark"/>
    <link rel="icon" href="/assets/icon.svg"/>
    <link rel="mask-icon" href="/assets/icon.svg" color="#0055ee"/>
    <link rel="stylesheet" href="/assets/app.css"/>
    <style>
      :root {
        --color-accent: #0055ee;
        --color-accent-dark: #00338F;
        --color-accent-darkest: #00225F;
        --color-accent-light: #7EACFF;
        --color-accent-lightest: #ADCBFF;
      }
    </style>
    <title>Setting up your Indiekit server - Indiekit</title>
  </head><body class="app">    <header class="header">
      <div class="header__container">
        <div class="header__title">
          <a class="u-url" href="/">
            <span class="p-name">Indiekit</span>
          </a>
        </div>    <nav class="header__navigation" aria-label="site">      <a href="/docs">Docs</a>      <a href="https://github.com/getindiekit/indiekit">GitHub</a>    </nav>  </div>
    </header><main class="main" id="main">
      <article class="article">  <h1 class="article__title">
<span class="article__parent">Documentation</span> Setting up your Indiekit server</h1>  <div class="article__body s-linear">
<h2 id="create-a-configuration-file">Create a configuration file</h2>
<p>Create a configuration file, (for example <code>indiekit.config.js</code>, but you can call this file whatever you like), and then setup Indiekit and export its server:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>Indiekit<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@indiekit/indiekit'</span><span class="token punctuation">;</span><br><br><span class="token comment">// Create a new indiekit instance</span><br><span class="token keyword">const</span> indiekit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Indiekit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Create a server</span><br><span class="token keyword">const</span> server <span class="token operator">=</span> indiekit<span class="token punctuation">.</span><span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Export server</span><br><span class="token keyword">export</span> <span class="token keyword">default</span> server<span class="token punctuation">;</span></code></pre>
<p>Start the server with <code>node indiekit.config.js</code>.</p>
<p>Indiekit can now listen for Micropub requests, but a few bits of information are needed before it can publish content to your website.</p>
<h2 id="configure-your-publication">Configure your publication</h2>
<p>Indiekit needs to know your website’s URL. You can provide this information using Indiekit’s configuration API, like so:</p>
<pre class="language-js"><code class="language-js">indiekit<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'publication.me'</span><span class="token punctuation">,</span> <span class="token string">'https://paulrobertlloyd.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="add-a-publication-preset">Add a publication preset</h2>
<p>Indiekit needs to know what post types you want to publish (for example notes and photos) and in which format. This information can be provided by setting <code>publication.postTypes</code> and <code>publication.postTemplate</code>. See <a href="/docs/post-types.md">Configuring post types</a> and <a href="/docs/post-template.md">Creating a post template</a>.</p>
<p>A publication preset plug-in can provide default values for these options (which you can override in your configuration file).</p>
<p>If you use the Jekyll static site generator, you can install the <a href="https://www.npmjs.com/package/@indiekit/preset-jekyll">Jekyll plug-in</a>:</p>
<p><code>npm install @indiekit/preset-jekyll</code></p>
<p>Then add it to your configuration file:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>JekyllPreset<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@indiekit/preset-jekyll'</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> jekyll <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JekyllPreset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>indiekit<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'publication.preset'</span><span class="token punctuation">,</span> jekyll<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="add-a-content-store">Add a content store</h2>
<p>Indiekit needs to know where to store your posts and media files. A content store plug-in provides this functionality.</p>
<p>If you are saving your files to GitHub, install the GitHub plug-in:</p>
<p><code>npm install @indiekit/store-github</code></p>
<p>Then add it to your configuration file:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>GithubStore<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@indiekit/store-github'</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> github <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GithubStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  user<span class="token operator">:</span> <span class="token string">'username'</span><span class="token punctuation">,</span> <span class="token comment">// Your username on GitHub</span><br>  repo<span class="token operator">:</span> <span class="token string">'reponame'</span><span class="token punctuation">,</span> <span class="token comment">// Repository files will be saved to</span><br>  branch<span class="token operator">:</span> <span class="token string">'main'</span><span class="token punctuation">,</span> <span class="token comment">// Branch to publish to</span><br>  token<span class="token operator">:</span> <span class="token string">'token'</span> <span class="token comment">// GitHub personal access token</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>indiekit<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'publication.store'</span><span class="token punctuation">,</span> github<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="example-configuration">Example configuration</h2>
<p>With all these settings in place, your configuration file will look something like this:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>Indiekit<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@indiekit/indiekit'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>JekyllPreset<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@indiekit/preset-jekyll'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>GithubStore<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@indiekit/store-github'</span><span class="token punctuation">;</span><br><br><span class="token comment">// Create a new indiekit instance</span><br><span class="token keyword">const</span> indiekit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Indiekit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Configure GitHub content store</span><br><span class="token keyword">const</span> github <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GithubStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  user<span class="token operator">:</span> <span class="token string">'username'</span><span class="token punctuation">,</span> <span class="token comment">// Your username on GitHub</span><br>  repo<span class="token operator">:</span> <span class="token string">'reponame'</span><span class="token punctuation">,</span> <span class="token comment">// Repository files will be saved to</span><br>  branch<span class="token operator">:</span> <span class="token string">'main'</span><span class="token punctuation">,</span> <span class="token comment">// Branch to publish to</span><br>  token<span class="token operator">:</span> <span class="token string">'token'</span> <span class="token comment">// GitHub personal access token</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Configure Jekyll publication preset</span><br><span class="token keyword">const</span> jekyll <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JekyllPreset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Configure publication</span><br>indiekit<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'publication.me'</span><span class="token punctuation">,</span> <span class="token string">'https://paulrobertlloyd.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>indiekit<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'publication.preset'</span><span class="token punctuation">,</span> jekyll<span class="token punctuation">)</span><span class="token punctuation">;</span><br>indiekit<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'publication.store'</span><span class="token punctuation">,</span> github<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Create a server</span><br><span class="token keyword">const</span> server <span class="token operator">=</span> indiekit<span class="token punctuation">.</span><span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Export server</span><br><span class="token keyword">export</span> <span class="token keyword">default</span> server<span class="token punctuation">;</span></code></pre>
<h2 id="enable-automatic-discovery">Enable automatic discovery</h2>
<p>To ensure Indiekit’s endpoint can be discovered by Micropub clients (and have permission to post to your website), you need to add the follow values to your website’s <code>&lt;head&gt;</code>:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>micropub<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[INDIEKIT_URL]/micropub<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>authorization_endpoint<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://indieauth.com/auth<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>token_endpoint<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://tokens.indieauth.com/token<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre>
</div>
</article>    </main>    <footer class="footer">
      <div class="footer__container">    <nav class="footer__navigation" aria-label="secondary">      <a href="https://github.com/getindiekit/getindiekithub.io/releases/tag/v0.1.0">v0.1.0</a>    </nav>    <a class="footer__logo" href="https://github.com/getindiekit/getindiekithub.io">
          <img class="u-logo" src="undefined/assets/icon.svg" alt="Powered by Indiekit"/>
        </a>  </div>
    </footer>  </body>
</html>